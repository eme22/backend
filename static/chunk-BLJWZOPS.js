import{a as k}from"./chunk-OJ52E7LM.js";import{a as M,c as N,d as R,g as j}from"./chunk-5NKQJYQU.js";import"./chunk-KL4PSEE7.js";import{Ga as b,Gb as n,Hb as u,Ia as d,Ib as s,Jb as _,Oa as v,Tb as g,Ub as f,Va as C,Za as x,aa as h,ba as E,ia as y,jb as I,kb as P,lb as m,mb as e,nb as t,ob as c,qc as w,rc as O,sc as F,tc as T,uc as A,xb as p,xc as D}from"./chunk-HE7H4WY4.js";function L(a,r){a&1&&(e(0,"div",4),c(1,"div",5),e(2,"p",6),n(3,"Cargando informaci\xF3n del pedido..."),t()())}function z(a,r){if(a&1&&(e(0,"div",18)(1,"dt",19),n(2,"PayPal Email:"),t(),e(3,"dd",23),n(4),t()()),a&2){let i,o=p(2);d(4),u((i=o.order().payment_details)==null?null:i.paypal_email)}}function $(a,r){if(a&1&&(e(0,"div",18)(1,"dt",19),n(2,"Tipo de Billetera:"),t(),e(3,"dd",23),n(4),t()()),a&2){let i,o=p(2);d(4),u((i=o.order().payment_details)==null?null:i.wallet_type)}}function V(a,r){if(a&1&&(e(0,"div",18)(1,"dt",19),n(2,"Direcci\xF3n de Billetera:"),t(),e(3,"dd",20),n(4),t()()),a&2){let i,o=p(2);d(4),u((i=o.order().payment_details)==null?null:i.wallet_address)}}function q(a,r){if(a&1&&(e(0,"address",27),n(1),c(2,"br"),n(3),c(4,"br"),n(5),c(6,"br"),n(7),t()),a&2){let i=p(2);d(),s(" ",i.shippingAddress.street),d(2),_(" ",i.shippingAddress.city,", ",i.shippingAddress.state),d(2),s(" ",i.shippingAddress.postal_code),d(2),s(" ",i.shippingAddress.country," ")}}function U(a,r){a&1&&(e(0,"p",28),n(1,"No se proporcion\xF3 direcci\xF3n de env\xEDo."),t())}function G(a,r){if(a&1&&(e(0,"div",36),c(1,"img",37),e(2,"div",38)(3,"p",39),n(4),t(),e(5,"p",28),n(6),g(7,"number"),t()(),e(8,"p",40),n(9),g(10,"number"),t()()),a&2){let i=r.$implicit,o=p(2);d(),m("src",o.getDefaultImage(i.product==null?null:i.product.images),b)("alt",(i.product==null?null:i.product.name)||"Producto"),d(3),s(" ",(i.product==null?null:i.product.name)||"Producto"," "),d(2),_(" ",i.quantity," x ","$"+f(7,6,i.price,"1.2-2")," "),d(3),s(" ","$"+f(10,9,i.price*i.quantity,"1.2-2")," ")}}function H(a,r){if(a&1&&(e(0,"div",41)(1,"h2",42),n(2,"Notas del Pedido"),t(),e(3,"p",43),n(4),t()()),a&2){let i=p(2);d(4),u(i.order().notes)}}function J(a,r){if(a&1&&(e(0,"div",7)(1,"div",8)(2,"div",9),h(),e(3,"svg",10),c(4,"path",11),t()(),E(),e(5,"h1",12),n(6,"\xA1Pedido Realizado!"),t(),e(7,"p",13),n(8,"Tu pedido ha sido creado exitosamente y est\xE1 siendo procesado."),t()(),e(9,"div",14)(10,"div")(11,"div",15)(12,"h2",16),n(13,"Informaci\xF3n del Pedido"),t(),e(14,"dl",17)(15,"div",18)(16,"dt",19),n(17,"N\xFAmero de Pedido:"),t(),e(18,"dd",20),n(19),t()(),e(20,"div",18)(21,"dt",19),n(22,"Estado:"),t(),e(23,"dd",21)(24,"span",22),n(25),t()()(),e(26,"div",18)(27,"dt",19),n(28,"Fecha:"),t(),e(29,"dd",23),n(30),g(31,"date"),t()(),e(32,"div",18)(33,"dt",19),n(34,"Total:"),t(),e(35,"dd",24),n(36),g(37,"number"),t()()()(),e(38,"div",25)(39,"h2",16),n(40,"Informaci\xF3n de Pago"),t(),e(41,"dl",17)(42,"div",18)(43,"dt",19),n(44,"M\xE9todo de Pago:"),t(),e(45,"dd",23),n(46),t()(),e(47,"div",18)(48,"dt",19),n(49,"Estado de Pago:"),t(),e(50,"dd",21)(51,"span",22),n(52),t()()(),x(53,z,5,1,"div",26)(54,$,5,1,"div",26)(55,V,5,1,"div",26),t()()(),e(56,"div")(57,"div",15)(58,"h2",16),n(59,"Direcci\xF3n de Env\xEDo"),t(),I(60,q,8,5,"address",27)(61,U,2,0,"p",28),t(),e(62,"div",25)(63,"h2",16),n(64,"Productos Pedidos"),t(),e(65,"div",17),x(66,G,11,12,"div",29),t()()()(),x(67,H,5,1,"div",30),e(68,"div",31)(69,"h2",16),n(70,"Pr\xF3ximos Pasos"),t(),e(71,"div",32)(72,"p"),n(73,"\u2022 Recibir\xE1s un email con las instrucciones de pago en los pr\xF3ximos minutos."),t(),e(74,"p"),n(75,"\u2022 Una vez realizado el pago, tu pedido ser\xE1 procesado y enviado."),t(),e(76,"p"),n(77,'\u2022 Podr\xE1s hacer seguimiento del estado de tu pedido en la secci\xF3n "Mis Compras".'),t(),e(78,"p"),n(79,"\u2022 Si tienes alguna pregunta, no dudes en contactarnos."),t()()(),e(80,"div",33)(81,"button",34),n(82," Ver Mis Compras "),t(),e(83,"button",35),n(84," Continuar Comprando "),t()()()),a&2){let i,o,S,l=p();d(19),s("#",l.order().order_id),d(5),m("ngClass",l.getStatusClass(l.order().status)),d(),s(" ",l.getStatusText(l.order().status)," "),d(5),u(f(31,14,l.order().created_at,"medium")),d(6),u("$"+f(37,17,l.order().total_amount,"1.2-2")),d(10),s(" ",l.order().payment_method==="paypal"?"PayPal":"Billetera Electr\xF3nica"," "),d(5),m("ngClass",l.getPaymentStatusClass(l.order().payment_status)),d(),s(" ",l.getPaymentStatusText(l.order().payment_status)," "),d(),m("ngIf",(i=l.order().payment_details)==null?null:i.paypal_email),d(),m("ngIf",(o=l.order().payment_details)==null?null:o.wallet_type),d(),m("ngIf",(S=l.order().payment_details)==null?null:S.wallet_address),d(5),P(l.shippingAddress?60:61),d(6),m("ngForOf",l.order().order_items),d(),m("ngIf",l.order().notes)}}function K(a,r){a&1&&(e(0,"div",4)(1,"div",44),n(2,"\u274C"),t(),e(3,"h2",45),n(4,"Pedido no encontrado"),t(),e(5,"p",46),n(6,"No pudimos encontrar el pedido solicitado."),t(),e(7,"button",47),n(8," Volver al Inicio "),t()())}var B=class a{constructor(r,i,o){this.ordersService=r;this.route=i;this.router=o}order=y(null);loading=y(!1);shippingAddress=null;ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r?this.loadOrder(parseInt(r)):this.router.navigate(["/"])}loadOrder(r){this.loading.set(!0),this.ordersService.getOrder(r).subscribe({next:i=>{if(this.order.set(i),i&&typeof i.shipping_address=="string")try{this.shippingAddress=JSON.parse(i.shipping_address)}catch{this.shippingAddress=null}else this.shippingAddress=i?.shipping_address||null;console.log("Order:",i),this.loading.set(!1)},error:i=>{console.error("Error loading order:",i),this.loading.set(!1)}})}getStatusClass(r){switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}getStatusText(r){switch(r){case"pending":return"Pendiente";case"confirmed":return"Confirmado";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return"Desconocido"}}getPaymentStatusClass(r){switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"paid":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}getPaymentStatusText(r){switch(r){case"pending":return"Pendiente";case"paid":return"Pagado";case"failed":return"Fallido";default:return"Desconocido"}}getDefaultImage(r){if(r&&r.length>0){let i=r.find(o=>o.is_primary);return i?i.image_url:r[0].image_url}return"/placeholder-product.jpg"}static \u0275fac=function(i){return new(i||a)(v(k),v(M),v(N))};static \u0275cmp=C({type:a,selectors:[["app-order-confirmation"]],decls:5,vars:3,consts:[[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"bg-white","rounded-lg","shadow-sm"],["class","px-6 py-12 text-center",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],[1,"px-6","py-12","text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary-600","mx-auto"],[1,"mt-4","text-gray-500"],[1,"px-6","py-6"],[1,"text-center","mb-8"],[1,"mx-auto","flex","items-center","justify-center","h-16","w-16","rounded-full","bg-green-100","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-8","w-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-gray-50","rounded-lg","p-6","mb-6"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"space-y-3"],[1,"flex","justify-between"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-sm","text-gray-900","font-mono"],[1,"text-sm"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","text-gray-900"],[1,"text-sm","font-bold","text-primary-600"],[1,"bg-gray-50","rounded-lg","p-6"],["class","flex justify-between",4,"ngIf"],[1,"text-sm","text-gray-700","not-italic"],[1,"text-sm","text-gray-500"],["class","flex items-center space-x-3",4,"ngFor","ngForOf"],["class","mt-6 bg-blue-50 rounded-lg p-6",4,"ngIf"],[1,"mt-8","bg-yellow-50","rounded-lg","p-6"],[1,"space-y-2","text-sm","text-gray-700"],[1,"mt-8","flex","flex-col","sm:flex-row","gap-4"],["routerLink","/my-purchases",1,"flex-1","bg-primary-600","text-white","py-3","px-6","rounded-md","hover:bg-primary-700","transition-colors","font-medium","text-center"],["routerLink","/",1,"flex-1","bg-gray-200","text-gray-700","py-3","px-6","rounded-md","hover:bg-gray-300","transition-colors","font-medium","text-center"],[1,"flex","items-center","space-x-3"],[1,"w-12","h-12","object-cover","rounded-md",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-sm","font-medium","text-gray-900"],[1,"mt-6","bg-blue-50","rounded-lg","p-6"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-700"],[1,"text-6xl","text-gray-400","mb-4"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["routerLink","/",1,"bg-primary-600","text-white","px-6","py-3","rounded-md","hover:bg-primary-700","transition-colors","font-medium"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1),x(2,L,4,0,"div",2)(3,J,85,20,"div",3)(4,K,9,0,"div",2),t()()),i&2&&(d(2),m("ngIf",o.loading()),d(),m("ngIf",!o.loading()&&o.order()),d(),m("ngIf",!o.loading()&&!o.order()))},dependencies:[D,w,O,F,j,R,A,T],encapsulation:2})};export{B as OrderConfirmationComponent};
