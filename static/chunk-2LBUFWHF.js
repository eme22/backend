import{a as G}from"./chunk-7VR3ELP4.js";import{a as P}from"./chunk-EMFRQSN7.js";import{a as N}from"./chunk-HILPNHCX.js";import{c as O}from"./chunk-Y3VUQSNC.js";import"./chunk-6IRHWWGB.js";import"./chunk-P7DOQO73.js";import{c as R,g as H}from"./chunk-D3C3HQLZ.js";import"./chunk-TWZ67XBU.js";import{Gb as s,Hb as g,Hc as T,Ia as o,Lc as j,Oa as h,Q as x,Sb as A,Tb as C,U as y,Ub as D,Va as _,Za as p,aa as m,ba as c,ia as v,lb as l,mb as e,nb as t,ob as d,sc as E,tc as w,uc as M,vc as I,wb as f,xb as u,zc as k}from"./chunk-J3KRFXTR.js";var b=class i{constructor(a){this.http=a}apiUrl=`${j.apiUrl}`;getDashboardStats(){return this.http.get(`${this.apiUrl}/dashboard/stats`)}getRecentActivity(){return this.http.get(`${this.apiUrl}/dashboard/activity`)}static \u0275fac=function(n){return new(n||i)(y(T))};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};var V=(i,a,n,r)=>({"bg-green-500":i,"bg-blue-500":a,"bg-yellow-500":n,"bg-red-500":r});function B(i,a){i&1&&(e(0,"div",34),d(1,"div",35),t())}function z(i,a){if(i&1&&(e(0,"p",36),s(1),t()),i&2){let n=u();o(),g(n.stats().users)}}function $(i,a){i&1&&(e(0,"div",34),d(1,"div",35),t())}function q(i,a){if(i&1&&(e(0,"p",36),s(1),t()),i&2){let n=u();o(),g(n.stats().products)}}function J(i,a){i&1&&(e(0,"div",34),d(1,"div",35),t())}function K(i,a){if(i&1&&(e(0,"p",36),s(1),t()),i&2){let n=u();o(),g(n.stats().orders)}}function Q(i,a){i&1&&(e(0,"div",34),d(1,"div",35),t())}function W(i,a){if(i&1&&(e(0,"p",36),s(1),t()),i&2){let n=u();o(),g(n.stats().categories)}}function X(i,a){i&1&&(e(0,"div",37),d(1,"div",38),t())}function Y(i,a){if(i&1&&(e(0,"div",40),d(1,"div",41),e(2,"div",42)(3,"span",43),s(4),t(),e(5,"p",44),s(6),C(7,"date"),t()()()),i&2){let n=a.$implicit;o(),l("ngClass",A(6,V,n.status==="success",n.status==="info",n.status==="warning",n.status==="error")),o(3),g(n.message),o(2),g(D(7,3,n.created_at,"short"))}}function Z(i,a){if(i&1&&(e(0,"div",25),p(1,Y,8,11,"div",39),t()),i&2){let n=u();o(),l("ngForOf",n.recentActivity())}}function ee(i,a){i&1&&(e(0,"div",45)(1,"p",46),s(2,"No hay actividad reciente"),t()())}var L=class i{constructor(a,n,r){this.dashboardService=a;this.dialog=n;this.router=r}stats=v({users:0,products:0,orders:0,categories:0});recentActivity=v([]);loadingStats=v(!1);loadingActivity=v(!1);error=v(null);ngOnInit(){this.loadStats(),this.loadRecentActivity()}loadStats(){this.loadingStats.set(!0),this.error.set(null),this.dashboardService.getDashboardStats().subscribe({next:a=>{this.stats.set(a),this.loadingStats.set(!1)},error:a=>{console.error("Error loading dashboard stats:",a),this.error.set("Error al cargar las estad\xEDsticas"),this.loadingStats.set(!1),this.stats.set({users:156,products:89,orders:234,categories:12})}})}loadRecentActivity(){this.loadingActivity.set(!0),this.dashboardService.getRecentActivity().subscribe({next:a=>{this.recentActivity.set(a),this.loadingActivity.set(!1)},error:a=>{console.error("Error loading recent activity:",a),this.loadingActivity.set(!1),this.recentActivity.set([{id:1,type:"order",message:"Nuevo pedido #1234",created_at:new Date().toISOString(),status:"success"},{id:2,type:"product",message:"Producto agregado: Laptop HP",created_at:new Date(Date.now()-36e5).toISOString(),status:"info"},{id:3,type:"user",message:"Usuario registrado: Mar\xEDa Garc\xEDa",created_at:new Date(Date.now()-72e5).toISOString(),status:"warning"}])}})}openProductModal(){this.dialog.open(N,{width:"800px",data:{mode:"create"}}).closed.subscribe(n=>{n&&(this.loadStats(),this.loadRecentActivity())})}openCategoryModal(){this.dialog.open(P,{width:"600px",data:{mode:"create"}}).closed.subscribe(n=>{n&&(this.loadStats(),this.loadRecentActivity())})}openUserModal(){this.dialog.open(G,{width:"600px",data:{mode:"create"}}).closed.subscribe(n=>{n&&(this.loadStats(),this.loadRecentActivity())})}navigateToOrders(){this.router.navigate(["/admin/orders"])}refreshDashboard(){this.loadStats(),this.loadRecentActivity()}static \u0275fac=function(n){return new(n||i)(h(b),h(O),h(R))};static \u0275cmp=_({type:i,selectors:[["app-admin-dashboard"]],decls:78,vars:11,consts:[[1,"p-6"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-white","p-6","rounded-lg","shadow"],[1,"flex","items-center"],[1,"p-3","bg-blue-100","rounded-full"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-600"],["class","animate-pulse",4,"ngIf"],["class","text-2xl font-semibold text-gray-900",4,"ngIf"],[1,"p-3","bg-green-100","rounded-full"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"p-3","bg-yellow-100","rounded-full"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"p-3","bg-purple-100","rounded-full"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14-4H5m14 8H5"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"space-y-3"],[1,"flex","items-center","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","transition-colors","w-full","text-left",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],["class","flex justify-center py-4",4,"ngIf"],["class","space-y-3",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"animate-pulse"],[1,"h-8","bg-gray-200","rounded","w-16","mt-1"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"flex","justify-center","py-4"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-primary-600"],["class","flex items-center p-3 bg-gray-50 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-center","p-3","bg-gray-50","rounded-lg"],[1,"w-2","h-2","rounded-full","mr-3",3,"ngClass"],[1,"flex-1"],[1,"text-gray-700","text-sm"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-center","py-4"],[1,"text-gray-500","text-sm"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Panel de Administraci\xF3n"),t(),e(4,"p",3),s(5,"Bienvenido al sistema de gesti\xF3n"),t()(),e(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),m(),e(10,"svg",8),d(11,"path",9),t()(),c(),e(12,"div",10)(13,"p",11),s(14,"Usuarios"),t(),p(15,B,2,0,"div",12)(16,z,2,1,"p",13),t()()(),e(17,"div",5)(18,"div",6)(19,"div",14),m(),e(20,"svg",15),d(21,"path",16),t()(),c(),e(22,"div",10)(23,"p",11),s(24,"Productos"),t(),p(25,$,2,0,"div",12)(26,q,2,1,"p",13),t()()(),e(27,"div",5)(28,"div",6)(29,"div",17),m(),e(30,"svg",18),d(31,"path",19),t()(),c(),e(32,"div",10)(33,"p",11),s(34,"Pedidos"),t(),p(35,J,2,0,"div",12)(36,K,2,1,"p",13),t()()(),e(37,"div",5)(38,"div",6)(39,"div",20),m(),e(40,"svg",21),d(41,"path",22),t()(),c(),e(42,"div",10)(43,"p",11),s(44,"Categor\xEDas"),t(),p(45,Q,2,0,"div",12)(46,W,2,1,"p",13),t()()()(),e(47,"div",23)(48,"div",5)(49,"h2",24),s(50,"Acciones R\xE1pidas"),t(),e(51,"div",25)(52,"button",26),f("click",function(){return r.openProductModal()}),m(),e(53,"svg",27),d(54,"path",28),t(),c(),e(55,"span",29),s(56,"Agregar Producto"),t()(),e(57,"button",26),f("click",function(){return r.openCategoryModal()}),m(),e(58,"svg",27),d(59,"path",22),t(),c(),e(60,"span",29),s(61,"Crear Categor\xEDa"),t()(),e(62,"button",26),f("click",function(){return r.openUserModal()}),m(),e(63,"svg",27),d(64,"path",30),t(),c(),e(65,"span",29),s(66,"Crear Usuario"),t()(),e(67,"button",26),f("click",function(){return r.navigateToOrders()}),m(),e(68,"svg",27),d(69,"path",19),t(),c(),e(70,"span",29),s(71,"Gestionar Pedidos"),t()()()(),e(72,"div",5)(73,"h2",24),s(74,"Actividad Reciente"),t(),p(75,X,2,0,"div",31)(76,Z,2,1,"div",32)(77,ee,3,0,"div",33),t()()()),n&2&&(o(15),l("ngIf",r.loadingStats()),o(),l("ngIf",!r.loadingStats()),o(9),l("ngIf",r.loadingStats()),o(),l("ngIf",!r.loadingStats()),o(9),l("ngIf",r.loadingStats()),o(),l("ngIf",!r.loadingStats()),o(9),l("ngIf",r.loadingStats()),o(),l("ngIf",!r.loadingStats()),o(29),l("ngIf",r.loadingActivity()),o(),l("ngIf",!r.loadingActivity()&&r.recentActivity().length>0),o(),l("ngIf",!r.loadingActivity()&&r.recentActivity().length===0))},dependencies:[k,E,w,M,H,I],encapsulation:2})};export{L as AdminDashboardComponent};
