import{a as R}from"./chunk-6OEF5Y2I.js";import{b as A,d as H,e as T,f as j,g as q,h as z,q as V,s as D}from"./chunk-TPTRQRQT.js";import{c as N,d as k,g as F}from"./chunk-5NKQJYQU.js";import"./chunk-KL4PSEE7.js";import{Gb as s,Hb as E,Ia as a,Ib as I,Kb as y,Lb as v,Mb as h,Oa as d,Q as b,Va as w,Za as g,aa as p,ba as S,ia as c,lb as m,mb as e,nb as o,ob as f,sc as _,wb as M,xb as C,xc as L}from"./chunk-HE7H4WY4.js";var u=class i{handleApiError(r){if(r.error){let t=r.error;switch(r.status){case 400:return`Bad Request: ${t.message}`;case 401:return"Unauthorized: Please log in again";case 403:return"Forbidden: You don't have permission to access this resource";case 404:return"Not Found: The requested resource was not found";case 409:return`Conflict: ${t.message}`;case 422:return`Validation Error: ${t.message}`;case 500:return"Internal Server Error: Something went wrong on our end";default:return t.message||"An unexpected error occurred"}}else return r.message?r.message:"Network Error: Unable to connect to the server"}static \u0275fac=function(t){return new(t||i)};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};function G(i,r){if(i&1&&(e(0,"div",14)(1,"div",15)(2,"div",16),p(),e(3,"svg",17),f(4,"path",18),o()(),S(),e(5,"div",19)(6,"h3",20),s(7),o()()()()),i&2){let t=C();a(7),E(t.errorMessage())}}function U(i,r){i&1&&(e(0,"span",21),p(),e(1,"svg",22),f(2,"circle",23)(3,"path",24),o()())}var W=class i{constructor(r,t,n){this.authService=r;this.router=t;this.errorHandler=n}credentials={username:"",password:""};loading=c(!1);errorMessage=c("");onSubmit(){if(!this.credentials.username||!this.credentials.password){this.errorMessage.set("Por favor ingresa usuario y contrase\xF1a");return}this.loading.set(!0),this.errorMessage.set(""),this.authService.login(this.credentials).subscribe({next:r=>{this.loading.set(!1),this.router.navigate(["/"])},error:r=>{this.loading.set(!1),this.errorMessage.set(this.errorHandler.handleApiError(r))}})}static \u0275fac=function(t){return new(t||i)(d(R),d(N),d(u))};static \u0275cmp=w({type:i,selectors:[["app-login"]],decls:24,vars:6,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"font-medium","text-primary-600","hover:text-primary-500"],[1,"mt-8","space-y-6",3,"ngSubmit"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],[1,"space-y-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","name","username","type","text","required","","placeholder","Ingresa tu usuario",1,"mt-1","appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","name","password","type","password","required","","placeholder","Ingresa tu contrase\xF1a",1,"mt-1","appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],[1,"flex-shrink-0"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,n){t&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),s(4," Iniciar Sesi\xF3n "),o(),e(5,"p",3),s(6," O "),e(7,"a",4),s(8," crea una cuenta nueva "),o()()(),e(9,"form",5),M("ngSubmit",function(){return n.onSubmit()}),g(10,G,8,1,"div",6),e(11,"div",7)(12,"div")(13,"label",8),s(14," Usuario "),o(),e(15,"input",9),h("ngModelChange",function(l){return v(n.credentials.username,l)||(n.credentials.username=l),l}),o()(),e(16,"div")(17,"label",10),s(18," Contrase\xF1a "),o(),e(19,"input",11),h("ngModelChange",function(l){return v(n.credentials.password,l)||(n.credentials.password=l),l}),o()()(),e(20,"div")(21,"button",12),g(22,U,4,0,"span",13),s(23),o()()()()()),t&2&&(a(10),m("ngIf",n.errorMessage()),a(5),y("ngModel",n.credentials.username),a(4),y("ngModel",n.credentials.password),a(2),m("disabled",n.loading()),a(),m("ngIf",n.loading()),a(),I(" ",n.loading()?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "))},dependencies:[L,_,D,z,A,H,T,V,q,j,F,k],encapsulation:2})};export{W as LoginComponent};
