import{a as F}from"./chunk-IUYS4ZSJ.js";import{d as M,g as j}from"./chunk-ZXTFQK7X.js";import"./chunk-TYBCTD6A.js";import{$ as x,Ga as E,Gb as n,Hb as k,Ia as o,Ib as p,Oa as w,Tb as b,Ub as f,Va as I,Za as h,_ as u,aa as _,ba as y,ia as C,lb as d,mb as t,nb as i,ob as g,rc as T,sc as V,ub as S,uc as D,wb as v,xb as s,xc as q}from"./chunk-7IT3E43U.js";function L(a,r){a&1&&(t(0,"div",6),g(1,"div",7),t(2,"p",8),n(3,"Cargando carrito..."),i()())}function N(a,r){a&1&&(t(0,"div",6)(1,"div",9),n(2,"\u{1F6D2}"),i(),t(3,"h2",10),n(4,"Tu carrito est\xE1 vac\xEDo"),i(),t(5,"p",11),n(6,"\xA1Agrega algunos productos para empezar!"),i(),t(7,"button",12),n(8," Continuar Comprando "),i()())}function O(a,r){if(a&1){let e=S();t(0,"div",26),g(1,"img",27),t(2,"div",28)(3,"h3",29),n(4),i(),t(5,"p",30),n(6),i(),t(7,"p",31),n(8),b(9,"number"),i()(),t(10,"div",32)(11,"button",33),v("click",function(){let c=u(e).$implicit,m=s(2);return x(m.decrementQuantity(c))}),_(),t(12,"svg",34),g(13,"path",35),i()(),y(),t(14,"span",36),n(15),i(),t(16,"button",37),v("click",function(){let c=u(e).$implicit,m=s(2);return x(m.incrementQuantity(c))}),_(),t(17,"svg",34),g(18,"path",38),i()()(),y(),t(19,"div",39)(20,"p",40),n(21),b(22,"number"),i(),t(23,"button",41),v("click",function(){let c=u(e).$implicit,m=s(2);return x(m.removeItem(c))}),n(24," Eliminar "),i()()()}if(a&2){let e=r.$implicit;o(),d("src",(e.product==null||e.product.images==null||e.product.images[0]==null?null:e.product.images[0].image_url)||"/placeholder-product.jpg",E)("alt",(e.product==null?null:e.product.name)||"Producto"),o(3),p(" ",(e.product==null?null:e.product.name)||"Producto"," "),o(2),p(" ",(e.product==null?null:e.product.description)||"Sin descripci\xF3n"," "),o(2),p(" ","$"+f(9,8,e.price,"1.2-2")," c/u "),o(3),d("disabled",e.quantity<=1),o(4),k(e.quantity),o(6),p(" ","$"+f(22,11,e.price*e.quantity,"1.2-2")," ")}}function P(a,r){if(a&1){let e=S();t(0,"div",13)(1,"div",14),h(2,O,25,14,"div",15),i(),t(3,"div",16)(4,"div",17)(5,"div",18)(6,"span",19),n(7,"Subtotal:"),i(),t(8,"span",20),n(9),b(10,"number"),i()(),t(11,"div",21)(12,"button",22),n(13," Proceder al Pago "),i(),t(14,"div",23)(15,"button",24),n(16," Continuar Comprando "),i(),t(17,"button",25),v("click",function(){u(e);let c=s();return x(c.clearCart())}),n(18," Vaciar Carrito "),i()()()()()()}if(a&2){let e=s();o(2),d("ngForOf",e.cart().items),o(7),p(" ","$"+f(10,2,e.cart().total,"1.2-2")," ")}}var $=class a{constructor(r){this.cartService=r}cart=C(null);loading=C(!1);ngOnInit(){this.loadCart()}loadCart(){this.loading.set(!0),this.cartService.getCart().subscribe({next:r=>{this.cart.set(r),this.loading.set(!1)},error:r=>{console.error("Error loading cart:",r),this.loading.set(!1)}})}incrementQuantity(r){this.cartService.updateCartItem(r.product_id,{quantity:r.quantity+1}).subscribe({next:e=>{this.cart.set(e)},error:e=>{console.error("Error updating cart item:",e)}})}decrementQuantity(r){r.quantity>1&&this.cartService.updateCartItem(r.product_id,{quantity:r.quantity-1}).subscribe({next:e=>{this.cart.set(e)},error:e=>{console.error("Error updating cart item:",e)}})}removeItem(r){this.cartService.removeFromCart(r.product_id).subscribe({next:e=>{this.cart.set(e)},error:e=>{console.error("Error removing cart item:",e)}})}clearCart(){confirm("\xBFEst\xE1s seguro de que quieres vaciar tu carrito?")&&this.cartService.clearCart().subscribe({next:r=>{this.cart.set(r)},error:r=>{console.error("Error clearing cart:",r)}})}static \u0275fac=function(e){return new(e||a)(w(F))};static \u0275cmp=I({type:a,selectors:[["app-cart"]],decls:8,vars:3,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"bg-white","rounded-lg","shadow-sm"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-2xl","font-bold","text-gray-900"],["class","px-6 py-12 text-center",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],[1,"px-6","py-12","text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary-600","mx-auto"],[1,"mt-4","text-gray-500"],[1,"text-6xl","text-gray-400","mb-4"],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["routerLink","/",1,"bg-primary-600","text-white","px-6","py-3","rounded-md","hover:bg-primary-700","transition-colors","font-medium"],[1,"px-6","py-6"],[1,"space-y-4"],["class","flex items-center space-x-4 border-b border-gray-200 pb-4 last:border-b-0",4,"ngFor","ngForOf"],[1,"mt-8","border-t","border-gray-200","pt-6"],[1,"bg-gray-50","rounded-lg","p-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-xl","font-bold","text-primary-600"],[1,"space-y-3"],["routerLink","/checkout",1,"w-full","bg-green-600","text-white","py-3","px-6","rounded-md","hover:bg-green-700","transition-colors","font-medium","text-lg"],[1,"flex","space-x-3"],["routerLink","/",1,"flex-1","bg-gray-200","text-gray-700","py-2","px-4","rounded-md","hover:bg-gray-300","transition-colors","font-medium"],[1,"flex-1","bg-red-600","text-white","py-2","px-4","rounded-md","hover:bg-red-700","transition-colors","font-medium",3,"click"],[1,"flex","items-center","space-x-4","border-b","border-gray-200","pb-4","last:border-b-0"],[1,"w-20","h-20","object-cover","rounded-md",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-lg","font-medium","text-gray-900","truncate"],[1,"text-sm","text-gray-500","mt-1"],[1,"text-sm","font-medium","text-primary-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"w-8","h-8","rounded-full","bg-gray-100","hover:bg-gray-200","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","transition-colors",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"w-8","text-center","font-medium"],[1,"w-8","h-8","rounded-full","bg-gray-100","hover:bg-gray-200","flex","items-center","justify-center","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-right"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-red-600","hover:text-red-700","text-sm","font-medium","mt-1","transition-colors",3,"click"]],template:function(e,l){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4,"Tu Carrito de Compras"),i()(),h(5,L,4,0,"div",4)(6,N,9,0,"div",4)(7,P,19,5,"div",5),i()()),e&2){let c,m;o(5),d("ngIf",l.loading()),o(),d("ngIf",!l.loading()&&(!((c=l.cart())!=null&&c.items)||l.cart().items.length===0)),o(),d("ngIf",!l.loading()&&((m=l.cart())==null?null:m.items)&&l.cart().items.length>0)}},dependencies:[q,T,V,j,M,D],encapsulation:2})};export{$ as CartComponent};
